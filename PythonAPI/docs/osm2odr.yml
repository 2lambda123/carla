---
- module_name: carla

  # - CLASSES ------------------------------
  classes:
  - class_name: Osm2Odr
    # - DESCRIPTION ------------------------
    doc: >
      Class that converts an OpenStreetMap map to OpenDRIVE format, so that it can be loaded in CARLA. Find out more about this feature in the [docs](tuto_G_openstreetmap.md).
    # - PROPERTIES -------------------------
    instance_variables:
    # - METHODS ----------------------------
    methods:
    - def_name: convert
      static:
        True
      return: str
      doc: >
        The converted OpenDRIVE xml data.
      params:
      - param_name: osm_file
        type: str
        doc: >
          The content of the input OpenStreetMap file parsed as string.
      - param_name: settings
        type: carla.OSM2ODRSettings
        doc: >
          Parameterization for the conversion.
      doc: >
        Takes the content of an <code>.osm</code> file (OpenStreetMap format) and returns the content of the <code>.xodr</code> (OpenDRIVE format) describing said map. Some parameterization is passed to do the conversion.
  # --------------------------------------
  - class_name: Osm2OdrSettings
    # - DESCRIPTION ------------------------
    doc: >
      Helper class that contains the parameterization that will be used by carla.Osm2Odr to convert an OpenStreetMap map to OpenDRIVE format. Find out more about this feature in the [docs](tuto_G_openstreetmap.md).
    instance_variables:
    - var_name: use_offsets
      type: bool
      doc: >
        Enables the use of offset for the conversion. The offset will move the position of the origin of the map.
        If enabled, this setting overwrites part of the `proj_string` setting that defines latitude and longitude origin. As a result, the OpenDRIVE will not contain the `proj_string`. __Default is `False`__.
    - var_name: offset_x
      type: float
      var_units: meters
      doc: >
        Offset in the X axis. __Default is `0.0`__.
    - var_name: offset_y
      type: float
      var_units: meters
      doc: >
        Offset in the Y axis. __Default is `0.0`__.
    - var_name: default_lane_width
      type: float
      var_units: meters
      doc: >
        Width of the lanes described in the resulting XODR map. __Default is `4.0`__.
    - var_name: elevation_layer_height
      type: float
      var_units: meters
      doc: >
        Defines the height separating two different [OpenStreetMap layers](https://wiki.openstreetmap.org/wiki/Key:layer). __Default is `0.0`__.
    - var_name: proj_string
      type: str
      doc: >
        Sets the PROJ string to define the projection from the geographic coordinate system of Open Street Map to CARLA's cartesian system. This string is then written to the OpenDRIVE file. __Default is `"+proj=tmerc"`__.
    - var_name: center_map
      type: bool
      doc: >
        Sets the coordinate origin in the center of the map.
        If enabled, this setting overwrites part of the `proj_string` setting that defines latitude and longitude origin. As a result, the OpenDRIVE will not contain the `proj_string`. __Default is `False`__.
    - var_name: generate_traffic_lights
      type: bool
      doc: >
        Enables the parsing of traffic lights from Open Street Map data. If enabled, junctions marked as controlled with traffic light will be exported to the OpenDRIVE. __Default is `True`__.
    - var_name: all_junctions_with_traffic_lights
      type: bool
      doc: >
        Forces all junctions to be considered as being controlled with traffic lights regardless of the Open Street Map definition. __Default is `False`__.
    # - METHODS ----------------------------
    methods:
    - def_name: set_osm_way_types
      doc: >
        Sets which Open Street Map roads will be exported to OpenDRIVE.
      params:
      - param_name: way_types
        type: list(str)
        default: ["motorway", "motorway_link", "trunk", "trunk_link", "primary", "primary_link", "secondary", "secondary_link", "tertiary", "tertiary_link", "unclassified", "residential"]
        doc: >
          The list of Open Street Map road types that should be exported to OpenDRIVE.
    - def_name: set_traffic_light_excluded_way_types
      doc: >
        Sets a list of Open Street Map roads that will not generate traffic lights even if `generate_traffic_lights` is enabled. This prevents link roads or high ways from generating traffic lights.
      params:
      - param_name: way_types
        type: list(str)
        default: ["motorway_link", "primary_link", "secondary_link", "tertiary_link"]
        doc: >
          The list of Open Street Map road types that will not generate traffic lights.

